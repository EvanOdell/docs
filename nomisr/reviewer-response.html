<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>or keyword_term <- if.else(keyword, “keywords-”, “") query <- paste0(base_query, key_word_term, search, "”) • nomisr</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/journal/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script>



<meta property="og:title" content="or keyword_term <- if.else(keyword, “keywords-”, “") query <- paste0(base_query, key_word_term, search, "”)" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-90706059-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-90706059-1');
</script>

  </head>

  <body>
    <div class="container template-title-body">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">nomisr</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.3.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="https://docs.evanodell.com">Docs Home</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="articles/introduction.html">Introduction</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://docs.evanodell.com">Documentation Home</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="https://docs.evanodell.com/hansard">hansard</a>
    </li>
    <li>
      <a href="https://docs.evanodell.com/mnis">mnis</a>
    </li>
    <li>
      <a href="https://docs.evanodell.com/parlitools">parlitools</a>
    </li>
    <li>
      <a href="https://docs.evanodell.com/nomisr">nomisr</a>
    </li>
    <li>
      <a href="https://docs.evanodell.com/fixerapi">fixerapi</a>
    </li>
    <li>
      <a href="https://docs.evanodell.com/refuge">refuge</a>
    </li>
    <li>
      <a href="https://docs.evanodell.com/emisc">emisc</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ropensci/nomisr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://evanodell.com">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="contents col-md-9">
    <div class="page-header">
      <h1>or keyword_term &lt;- if.else(keyword, “keywords-”, “&quot;) query &lt;- paste0(base_query, key_word_term, search, &quot;”)</h1>
    </div>


<p>Hi @cderv and @pegeler, thank you both of you very much for your helpful comments and suggestions, sorry for not responding more quickly.</p>
<div id="response-to-cderv" class="section level2">
<h2 class="hasAnchor">
<a href="#response-to-cderv" class="anchor"></a>Response to @cderv</h2>
<div id="list-columns" class="section level4">
<h4 class="hasAnchor">
<a href="#list-columns" class="anchor"></a>List-columns</h4>
<p>I find it kind of necessary because you also used list-columns in tibbles. This is not something easy for some newcomers to handles. Even for some dplyr users who do not used that a lot, it is not something easy. Adding some example in the vignettes to show how to retrieve embedded data.frame inside some tibble’s list column could be a good idea. To illustrate:</p>
library(nomisr) library(dplyr, warn.conflicts = F) y &lt;- nomis_data_info(“NM_893_1”) y$annotations.annotation %&gt;% class()
#&gt; [1] “list” y$annotations.annotation[[1]] %&gt;% class()
#&gt; [1] “data.frame” y %&gt;% pull(annotations.annotation) %&gt;% class()
#&gt; [1] “list” y %&gt;% pull(annotations.annotation)%&gt;% .[[1]] %&gt;% class()
#&gt; [1] “data.frame” y %&gt;% pull(annotations.annotation) %&gt;% purrr::pluck(1) %&gt;% class()
#&gt; [1] “data.frame” y %&gt;% pull(annotations.annotation) %&gt;% purrr::map(1) %&gt;% class()
#&gt; [1] “list” y %&gt;% tidyr::unnest(annotations.annotation) %&gt;% glimpse()
#&gt; Observations: 14
#&gt; Variables: 11
#&gt; $ agencyid <chr> “NOMIS”, “NOMIS”, “NOMIS”…
#&gt; $ id <chr> “NM_893_1”, “NM_893_1”, "…
#&gt; $ uri <chr> “Nm-893d1”, “Nm-893d1”, "…
#&gt; $ version <dbl> 1, 1, 1, 1, 1, 1, 1, 1, 1…
#&gt; $ components.primarymeasure.conceptref <chr> “OBS_VALUE”, “OBS_VALUE”,…
#&gt; $ components.timedimension.codelist <chr> “CL_893_1_TIME”, "CL_893_…
#&gt; $ components.timedimension.conceptref <chr> “TIME”, “TIME”, “TIME”, "…
#&gt; $ name.value <chr> "LC4408EW - Tenure by num…
#&gt; $ name.lang <chr> “en”, “en”, “en”, “en”, "…
#&gt; $ annotationtext <chr> "Current (being actively …
<p>#&gt; $ annotationtitle <chr> “Status”, “Keywords”, "Un…</chr></p>
<p><strong>Response:</strong> I’ve added a similar example to the vignette, which is similar enough to your example that I feel I should cite you as a contributor if that is okay.</p>
<p>Following are my review comments, for improvement:</p>
</chr></chr></chr></chr></chr></chr></dbl></chr></chr></chr>
</div>
<div id="about-community-guidelines" class="section level4">
<h4 class="hasAnchor">
<a href="#about-community-guidelines" class="anchor"></a>About Community Guidelines</h4>
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">There is no contribution guidelines <span class="cf">in</span> the README or other CONTRIBUTING.md.</a></code></pre></div>
<p><strong>Response:</strong> Added a CONTRIBUTING.md in <a href="https://github.com/evanodell/nomisr/commit/e4bbb0229709a861b1ef2141e9ecf6da6ff8fc10" class="uri">https://github.com/evanodell/nomisr/commit/e4bbb0229709a861b1ef2141e9ecf6da6ff8fc10</a></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">DESCRIPTION needs some improvement <span class="op">:</span><span class="st"> </span>no need to use Author and Maintainer fields <span class="cf">if</span> you are using Authors<span class="op">@</span>R. You can just use the latest. You can find some good example <span class="cf">in</span> R package book.</a></code></pre></div>
<p><strong>Response:</strong> Now only using <a href="mailto:Authors@R">Authors@R</a></p>
</div>
<div id="improvement-for-the-packaging-guidelines" class="section level4">
<h4 class="hasAnchor">
<a href="#improvement-for-the-packaging-guidelines" class="anchor"></a>Improvement for the packaging guidelines</h4>
<p>see below parts for details</p>
<ul>
<li>Adding a code of conduct <strong>Response:</strong> I a code of conduct in <a href="https://github.com/evanodell/nomisr/commit/ede35580b8369aba016b8375f0d6569b58063e9c" class="uri">https://github.com/evanodell/nomisr/commit/ede35580b8369aba016b8375f0d6569b58063e9c</a> and</li>
<li>Improve README considering it is the first entry point for discovering NOMIS API</li>
<li>Improve DESCRIPTION for authorship</li>
<li>[minor] follow versionning advice with <em>.</em>.*.9000 for in development version <strong>Response:</strong> Now following versioning best practice in development version</li>
<li>[question] I did not find why you need curl package in suggest… <strong>Response:</strong> For reasons I’m not entirely clear on, the package was failing on Travis without the curl suggestion, I think due to a bug in jsonlite.</li>
</ul>
<p><strong>Response:</strong> For reasons I’m not entirely clear on, the package was failing on Travis without the curl suggestion, I think due to a bug in jsonlite.</p>
</div>
<div id="readme-improvement" class="section level4">
<h4 class="hasAnchor">
<a href="#readme-improvement" class="anchor"></a>README improvement</h4>
<ul>
<li>I would be more precise on what the NOMIS database is and for who it is. For example, I found that this submission issue mentioned UK database but not the README. You help file for the package as pretty clear description of what it is for. While reviewing, I had a doubt and went to check on NOMIS. This is why I think the statement of need is not complete.</li>
<li>It feels like the README could get more examples on what your package can do. Only one of your functions is shown in the readme.</li>
<li>Put package documentation link in the title of the repo like in the reprex repo. By the way, you can add a more descriptive description on your github repo and some tags.</li>
<li>could precise that it uses the tibble format (from the tidyverse)</li>
</ul>
<p><strong>Response:</strong> I’ve added more details to the README, including more details on Nomis itself, a simple example and citation information.</p>
</div>
<div id="vignettes-improvement" class="section level4">
<h4 class="hasAnchor">
<a href="#vignettes-improvement" class="anchor"></a>Vignettes improvement</h4>
<ul>
<li>Vignette was not built when I installed the package with devtools::install_github. Did not know if this intended behavior or not.</li>
<li>I tried to build the vignette locally then: it worked.
<ul>
<li>However, there is a problem on result formatting with the tibble. (I think because you use result = ‘asis’ in code chunks) and because every results are not tables (y$annotations.annotation is a list for example.) so it does not print nicely.
<ul>
<li>The vignette do not show any code to get the results - I would show them for someone to learn how to use your function, as examples. (with echo = TRUE)</li>
<li>The formatting issue is visible on your website too</li>
</ul>
</li>
</ul>
</li>
<li>I think the vignette contains necessary information but does not show enough examples on how to retrieve data in the objects you return. You mentioned the three list columns with nested data.frame but not show how correctly extracts the info.</li>
<li>It is pretty clear that you package allows to retrieve a large amount of data from the NOMIS API. it seems necessary to always use nomis_data_info, then nomis_codes then nomis_get_data to be sure to not retrieve to much. The vignette helps you understand that. It could appears to in your readme, and it could be more clear how to construct a pipeline for good practice with this API.</li>
</ul>
<p>These improvement are the reason why I did not check the vignettes box, even if there is one in the github repo and doc. If you need help on all this, do not hesitate to ask.</p>
<p><strong>Response:</strong> As mentioned above, I’ve added your suggestions on exploring list-columns to the vignette, and fixed the online formatting issues. I’ve changed echo to TRUE to show code</p>
</div>
<div id="about-documentation-of-functions-and-examples" class="section level4">
<h4 class="hasAnchor">
<a href="#about-documentation-of-functions-and-examples" class="anchor"></a>About documentation of functions and examples</h4>
<ul>
<li>All functions are well documented.</li>
<li>I encountered some issues running the examples because of a timeout. I believe this is what you meant in your by “there are some limits to the amount of data that can be retrieved within a certain period of time, although those are not published.”. The maybe some improvement to do on this. (see under)</li>
<li>Is this the reason why you enclosed each example in \dontrun{} statement ? am I not sure on what is the recommendation for API package like this one for example ? \dontrun{} does allow anyone to run examples with something like example(“nomis_codes”, package = “nomisr”). Idea : Maybe \donttest{} is better here: does show in help and runs with example, but not run by R CMD check (so not run by CRAN ?) - see rd vignette from roxygen2</li>
</ul>
<p><strong>Response:</strong> I’ve changed \dontrun{} to \donttest{}</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">I ran all tests with devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/run_examples">run_examples</a></span>(<span class="dt">run =</span> <span class="ot">FALSE</span>) (<span class="cf">in</span> several time, due to timeout constraint). Everything is working. It works well <span class="cf">for</span> almost all, but your example assign systematically to a <span class="kw">variable</span> (named x or y <span class="op">-</span><span class="st"> </span>room <span class="cf">for</span> improvement) but never print to show head of results. I feel that is missing.</a></code></pre></div>
<p><strong>Response:</strong> I have changed the names in examples to be more descriptive of the data they are actually retrieving, and added a print call so the head is actually dixplayed.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">I said <span class="st">"almost all"</span> because there are some very long request <span class="cf">in</span> nomis_get_data. The warning that you put <span class="cf">in</span> Details states that it can be very slow process <span class="cf">if</span> calling significant amount of data. I would emphasize on this, saying this warning <span class="cf">in</span> Description part of the help file. And these example should definitely not be ran.</a></code></pre></div>
<p><strong>Response:</strong> I’ve removed the very long examples from nomis_get_data - I considered wrapping them in \dontrun{} but I think dropping them is the better option.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">I saw you made a pkgdown website. This is great <span class="op">!!</span><span class="st"> </span>and nice theme<span class="op">!</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">I did not find the source code of this website. I would have thought it leaved with the package source code. But no docs folder or gh<span class="op">-</span>pages. I find it useful to have access <span class="cf">for</span> letting people PR your some typos or other thing and all the site from your package source code. However, you may have good reason.</a></code></pre></div>
<p><strong>Response:</strong> I keep all the source code for my documentation website in my <a href="https://github.com/evanodell/docs">docs repo</a>. I did this so I could host on netlify with a custom domain and https encryption which - at least when I set it up - was not available through github pages. I’m not sure if that is the best option or not.</p>
</div>
</div>
<div id="various-comments-on-the-code" class="section level2">
<h2 class="hasAnchor">
<a href="#various-comments-on-the-code" class="anchor"></a>Various comments on the code</h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">[minor] I would put the url of the API <span class="cf">in</span> its own variable. I think it is better practice and more efficient to maintain <span class="cf">in</span> case of change <span class="cf">in</span> the <span class="kw">url</span> (e.g V0<span class="fl">.2</span>). The url is used several time and a change would mean copy pasting. another utils <span class="cf">function</span> could help building the <span class="kw">url</span> (paste0 is used three times), with the same base url def.sdmx.json<span class="er">)</span>. Know that it exists some tools to help build some strings with parameters like glue, and specific one to handle url like urltools or those <span class="cf">in</span> httr. You may not need them here but it is worth knowing.</a></code></pre></div>
<p><strong>Response:</strong> I’ve turned the API URL into its own variable.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">suppressMessage is used to hide the message of readr<span class="op">::</span>read_csv. However, the message appears because column types are guessed and not set. It is good practice to set column type <span class="cf">in</span> readr with column_types =<span class="st"> </span><span class="kw">cols</span>(<span class="op">&lt;</span>something<span class="op">&gt;</span>). In an API package like this one, it make even more sense because it could helps be aware of any change <span class="cf">in</span> the <span class="kw">format.</span> (using <span class="kw">stop_for_problems</span>() or just see a message appear) <span class="op">-</span><span class="st"> </span>see readr vignettes</a></code></pre></div>
<p><strong>Response:</strong> I’ve dropped suppressMessage and used <code>col_types = readr::cols(.default = readr::col_character())</code> to make columns characters by default.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">[minor] I don<span class="st">'t know what are the good practice on this one. I just feel that you have a dplyr dependency in import for three functions bind_rows, case_when and if_else than can be easily replace with rbind or if.else. I feel that, if the former are very useful interactively in an analysis, using them in a package can be unnecessary dependency to a "big" package that can cause you some effort later on if anything change in dplyr. More of a personal point of view on this one.</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="st">However, it relates on how you are build your query url</span></a></code></pre></div>
<p>query &lt;- dplyr::if_else(keywords==FALSE, paste0(“/def.sdmx.json?search=<em>", search, "</em>”), paste0(“/def.sdmx.json?search=keywords-”, search, "*")</p>
<p>could be rewritten without dplyr::if_else</p>
<p>base_query &lt;- “/def.sdmx.json?search=” if (keyword) { keyword_term &lt;- “keywords-”) } else { keyword_term &lt;- "*" }</p>
</div>
<div id="or-keyword_term---if-elsekeyword-keywords--query---paste0base_query-key_word_term-search" class="section level1">

<p>It would suppres a non essential dependency.</p>
<p><strong>Response:</strong> I’ve dropped the use of case_when and if_else in favour the the style you described above. bind_rows is used to combine together a single tibble with a list of one or more tibbles, and using rbind in place of bind_rows would require an extra step. If there are changes to bind_rows in the future it is only in one location so should be easy to adjust for.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">The style <span class="cf">in</span> code could be improve <span class="cf">in</span> some places. You can follow some style guide to help you.</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">like the one <span class="cf">in</span> ROpensci Guidelines linking to Advanced R or more recent the one used <span class="cf">in</span> the tidyverse styleguide. They even build some tools to help like styler and lintr. Example of improvement<span class="op">:</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="st">    </span>put spaces after foror <span class="cf">if</span> and also around =, <span class="op">==</span>, <span class="op">+</span>, <span class="op">&gt;</span>, ...</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">    indentation of <span class="kw">code</span> (<span class="cf">in</span> RStudio CTRL<span class="op">+</span>i i useful). <span class="cf">for</span> example <span class="cf">in</span> <span class="cf">if</span> () { } <span class="cf">else</span> { }, lines of code that are inside brackets should be indented.</a>
<a class="sourceLine" id="cb9-5" data-line-number="5">    use {} with <span class="cf">if</span> when it does not fit on one line</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">    More importantly, be consistent <span class="cf">in</span> all your script with the guideline you choose.</a>
<a class="sourceLine" id="cb9-7" data-line-number="7">Know that when you want to stop on a condition, there is also stopifnot. For user experience, you can also return clearer error sometimes with <span class="kw">stop</span>(<span class="st">"API request did not return any results"</span>, <span class="dt">call. =</span> <span class="ot">FALSE</span>) to not show the call <span class="cf">for</span> example.</a>
<a class="sourceLine" id="cb9-8" data-line-number="8">A good practice is also to use meaningful name inside your internal code, even <span class="cf">for</span> temporary variable. There are a lot of x, a, q, ... This will improve readability and the ease <span class="cf">for</span> others to collaborate on your <span class="kw">code</span> (including future you)</a></code></pre></div>
<p><strong>Response:</strong> I’ve added <code>call. = FALSE</code> to the various stop messages.</p>
<p><strong>Response:</strong> I’ve gone through the code and changed temporary variable names to be more meaningful, and formatted the code to improve indentation, spaces around if and for operators, ==, etc.</p>
</div>
<div id="about-the-timeout-and-size-of-data" class="section level1">
<h1 class="hasAnchor">
<a href="#about-the-timeout-and-size-of-data" class="anchor"></a>About the timeout and size of data</h1>
<div class="sourceCode" id="cb10"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">If session is <span class="kw">interactive</span>(), it may be a good idea to warn clearly and even ask <span class="cf">if</span> we want to continue when lots of data are being requested. I find myself playing with the example trying to retrieve <span class="dv">208888</span> of your pages</a></code></pre></div>
<p>Retrieving additional pages 1 of 208888 Retrieving additional pages 2 of 208888</p>
<p>I don’t know if some other API packages are doing something to help user or if it is all the user responsibility to know what is he doing. (users will surely be already NOMIS data users).</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">As another improvement, I think you should try to create custom error message <span class="cf">for</span> the timeout issue as you know it is an issue that will impact user experience but cannot really prevent. I encountered<span class="op">:</span></a></code></pre></div>
<p>a &lt;- nomis_codes(“NM_1_1”)</p>
</div>
<div id="error-in-open-connectioncon-rb" class="section level1">
<h1 class="hasAnchor">
<a href="#error-in-open-connectioncon-rb" class="anchor"></a>Error in open.connection(con, “rb”) :</h1>
</div>
<div id="timeout-was-reached-resolving-timed-out-after-10000-milliseconds" class="section level1">
<h1 class="hasAnchor">
<a href="#timeout-was-reached-resolving-timed-out-after-10000-milliseconds" class="anchor"></a>Timeout was reached: Resolving timed out after 10000 milliseconds</h1>
<p>You could use some tryCatch mechanism (some useful info in Advanced R).</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">[thoughts] You may need more control on the request mechanism to deal with timeout. First, it seems <span class="cf">for</span> the website one need to contact NOMIS help<span class="op">-</span>desk to know more about limitation. Then , your are relying on readr connection mechanism, and may need to use httr, crul or curl to better handle request to API with the specificity of NOMIS</a></code></pre></div>
<p><strong>Response:</strong> I’ve used tryCatch to hopefully provide more useful information in the case of time outs. I’ve also written, but not implemented, a warning and yes/no option in interactive sesssions with requests over 350,000 cells which are likely to cause rate limiting issues.</p>
<p>About SMDX format on NOMIS</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">Do you know about the rsdmx package ? it is on github and CRAN, there is WIKI. I did not find NOMIS <span class="cf">in</span> their listing, so I did not know <span class="cf">if</span> it works <span class="cf">for</span> you and how it could overlap with your package.</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">rsdmx is definitely more a generic package than yours. I just wanted to point it to you <span class="cf">in</span> case you did not know.</a></code></pre></div>
<p><strong>Response:</strong> I was not aware of it, but it is something I should explore for the future, thank you for pointing me towards it.</p>
<div id="response-to-pegeler" class="section level2">
<h2 class="hasAnchor">
<a href="#response-to-pegeler" class="anchor"></a>Response to pegeler</h2>
<p>Package Review for nomisr</p>
<p>Onboarding submission: ropensci/onboarding#190</p>
<p>Please check off boxes as applicable, and elaborate in comments below. Your review is not limited to these topics, as described in the reviewer guide</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">As the reviewer I confirm that there are no conflicts of interest <span class="cf">for</span> me to review this <span class="kw">work</span> (If you are unsure whether you are <span class="cf">in</span> conflict, please speak to your editor before starting your review).</a></code></pre></div>
<p>Documentation</p>
<p>The package includes all the following forms of documentation:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">A statement of need clearly stating problems the software is designed to solve and its target audience <span class="cf">in</span> README</a>
<a class="sourceLine" id="cb15-2" data-line-number="2">Installation instructions<span class="op">:</span><span class="st"> </span><span class="cf">for</span> the development version of package and any non<span class="op">-</span>standard dependencies <span class="cf">in</span> README</a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="kw">Vignette</span>(s) demonstrating major functionality that runs successfully locally</a>
<a class="sourceLine" id="cb15-4" data-line-number="4">Function Documentation<span class="op">:</span><span class="st"> </span><span class="cf">for</span> all exported functions <span class="cf">in</span> R help</a>
<a class="sourceLine" id="cb15-5" data-line-number="5">Examples <span class="cf">for</span> all exported functions <span class="cf">in</span> R Help that run successfully locally</a>
<a class="sourceLine" id="cb15-6" data-line-number="6">Community guidelines including contribution guidelines <span class="cf">in</span> the README or CONTRIBUTING, and DESCRIPTION with URL, BugReports and <span class="kw">Maintainer</span> (which may be autogenerated via Authors<span class="op">@</span>R).</a>
<a class="sourceLine" id="cb15-7" data-line-number="7"></a>
<a class="sourceLine" id="cb15-8" data-line-number="8">For packages co<span class="op">-</span>submitting to JOSS</a>
<a class="sourceLine" id="cb15-9" data-line-number="9"></a>
<a class="sourceLine" id="cb15-10" data-line-number="10">    The package has an obvious research application according to JOSS<span class="st">'s definition</span></a>
<a class="sourceLine" id="cb15-11" data-line-number="11"></a>
<a class="sourceLine" id="cb15-12" data-line-number="12"><span class="st">The package contains a paper.md matching JOSS'</span>s requirements with<span class="op">:</span></a>
<a class="sourceLine" id="cb15-13" data-line-number="13"></a>
<a class="sourceLine" id="cb15-14" data-line-number="14"><span class="st">    </span>A short summary describing the high<span class="op">-</span>level functionality of the software</a>
<a class="sourceLine" id="cb15-15" data-line-number="15">    Authors<span class="op">:</span><span class="st"> </span>A list of authors with their affiliations</a>
<a class="sourceLine" id="cb15-16" data-line-number="16">    A statement of need clearly stating problems the software is designed to solve and its target audience.</a>
<a class="sourceLine" id="cb15-17" data-line-number="17">    References<span class="op">:</span><span class="st"> </span>with DOIs <span class="cf">for</span> all those that have <span class="kw">one</span> (e.g. papers, datasets, software).</a></code></pre></div>
<p>Functionality</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">Installation<span class="op">:</span><span class="st"> </span>Installation succeeds as documented.</a>
<a class="sourceLine" id="cb16-2" data-line-number="2">Functionality<span class="op">:</span><span class="st"> </span>Any functional claims of the software been confirmed.</a>
<a class="sourceLine" id="cb16-3" data-line-number="3">Performance<span class="op">:</span><span class="st"> </span>Any performance claims of the software been confirmed.</a>
<a class="sourceLine" id="cb16-4" data-line-number="4">Automated tests<span class="op">:</span><span class="st"> </span>Unit tests cover essential functions of the package</a>
<a class="sourceLine" id="cb16-5" data-line-number="5">and a reasonable range of inputs and conditions. All tests pass on the local machine.</a>
<a class="sourceLine" id="cb16-6" data-line-number="6">Packaging guidelines<span class="op">:</span><span class="st"> </span>The package conforms to the rOpenSci packaging guidelines</a></code></pre></div>
<p>Final approval (post-review)</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">The author has responded to my review and made changes to my satisfaction. I recommend approving this package.</a></code></pre></div>
<p>Estimated hours spent reviewing: 10 Review Comments</p>
<p>Excellent work! This is a fine example of the level of quality and professionalism that I have come to expect from rOpenSci contributions. This package is a great addition to the complement of R functionality and provides a facile portal to a useful data source.</p>
<p>Many of the comments that I had have been addressed as a result of @cderv’s prompt and thorough review. In addition, development has continued to be very active over the past few weeks! Issues are fixed as quickly as I find them! Below are a few more comments that I would like to add. Basic Package Structure Overview README.md</p>
<p>The README.md does not contain citation information, per rOpenSci packaging guide. I am not sure how necessary that is since there is a CITATION file in the inst/ directory, however, it should be an easy add.</p>
<p>I would concur with @cderv in suggesting additional usage examples. DESCRIPTION</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">The DESCRIPTION file does not currently specify a minimum version of R. I would</a>
<a class="sourceLine" id="cb18-2" data-line-number="2">recommend doing so. A minor release is preferred over a patch release, e.g.</a>
<a class="sourceLine" id="cb18-3" data-line-number="3"></a>
<a class="sourceLine" id="cb18-4" data-line-number="4">Depends<span class="op">:</span><span class="st"> </span><span class="kw">R</span> (<span class="op">&gt;=</span><span class="st"> </span><span class="dv">3</span>.<span class="fl">4.0</span>)</a>
<a class="sourceLine" id="cb18-5" data-line-number="5"></a>
<a class="sourceLine" id="cb18-6" data-line-number="6">is better than</a>
<a class="sourceLine" id="cb18-7" data-line-number="7"></a>
<a class="sourceLine" id="cb18-8" data-line-number="8">Depends<span class="op">:</span><span class="st"> </span><span class="kw">R</span> (<span class="op">&gt;=</span><span class="st"> </span><span class="dv">3</span>.<span class="fl">4.1</span>)</a>
<a class="sourceLine" id="cb18-9" data-line-number="9"></a>
<a class="sourceLine" id="cb18-10" data-line-number="10">I am not seeing where curl is used even though it is <span class="cf">in</span> the Suggests list.</a></code></pre></div>
<p><strong>Response:</strong> I’ve added a minimum version of R (&gt;= 3.4.0) to the DESCRIPTION.</p>
<p><strong>Response:</strong> Not including curl was causing errors with jsonlite on travis - I’m not sure why, as jsonlite is supposed to import curl itself.</p>
<p>CITATION</p>
<blockquote>
<p>The CITATION file uses meta$Date to dynamically fill in date for the citation. However, the Date entry was removed from the DESCRIPTION file per gp suggestion so the date is NULL.</p>
</blockquote>
<blockquote>
<p>Since it is considered good practice to omit the Date entry because it may be prone to falling out of date, it seems that hard-coding the date in the citation would be silly. I briefly considered the use of a different field to dynamically update the citation date, such as Date/Publication or Packaged. However, those will only work for users who are downloading from a CRAN repos. Therefore I’m a little bit at a loss as to what the most elegant solution might be. I might suggest breaking with good practice here and adding the Date field back in since there is a reason to do so. Suggestions are welcome.</p>
</blockquote>
<p>The CITATION file should also end in a newline character :)</p>
<p><strong>Response:</strong> I’ve hardcoded 2018 into the CITATION file, which I think is the easiest solution, as its the year the package was first released, although I’m open to other suggestions as well.</p>
<p>Documentation</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">The man page <span class="cf">for</span> the package is named nmisr, not nomisr. This appears to be a typo.</a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="op">@</span>seealso can link to the other package functions using \link{}.</a>
<a class="sourceLine" id="cb19-3" data-line-number="3">It appears that some descriptions may be intended to be multi<span class="op">-</span>paragraph. Without explicitly</a>
<a class="sourceLine" id="cb19-4" data-line-number="4">using the <span class="op">@</span>description and <span class="op">@</span>details tags, the third code block is assumed to be the <span class="st">'details'</span></a>
<a class="sourceLine" id="cb19-5" data-line-number="5">block by default. Therefore, using explicit roxygen tags might be helpful here.</a>
<a class="sourceLine" id="cb19-6" data-line-number="6">Nomis data comes packaged <span class="cf">in</span> very complex data structures. Please don<span class="st">'t be afraid of '</span>over<span class="op">-</span>explaining<span class="st">'.</span></a>
<a class="sourceLine" id="cb19-7" data-line-number="7"><span class="st">The more information in the documentation and vignettes, the better for the user, especially if they do</span></a>
<a class="sourceLine" id="cb19-8" data-line-number="8"><span class="st">not have prior experience with Nomis data.</span></a>
<a class="sourceLine" id="cb19-9" data-line-number="9"><span class="st">'</span>Nomis<span class="st">' in the title for nomis_search() should be capitalized to be consistent with the rest of the package.</span></a></code></pre></div>
<p><strong>Response:</strong> I’ve expanded the documentation and used roxygen tags to improve organisation. I’ve also added an expanded explanation to the package vignette.</p>
<p>Examples</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">The example <span class="cf">for</span> nomis_get_data failed due to lack of data. I recommend finding a specific</a>
<a class="sourceLine" id="cb20-2" data-line-number="2">date range that will return results and then hard<span class="op">-</span>code that into the example.</a>
<a class="sourceLine" id="cb20-3" data-line-number="3">Athough \donttest{} used to be perfect <span class="cf">for</span> API packages because it would not be run by</a>
<a class="sourceLine" id="cb20-4" data-line-number="4">R CMD check but would be run by <span class="kw">example</span>() and would be included <span class="cf">in</span> the man page, it appears</a>
<a class="sourceLine" id="cb20-5" data-line-number="5">that the functionality has changed.</a>
<a class="sourceLine" id="cb20-6" data-line-number="6">Now, according to Hadley<span class="st">'s book, it appears that code enclosed</span></a>
<a class="sourceLine" id="cb20-7" data-line-number="7"><span class="st">in \donttest{} is indeed checked (though I have yet to confirm). Therefore,</span></a>
<a class="sourceLine" id="cb20-8" data-line-number="8"><span class="st">for long-running API calls, it might make sense to change back to \dontrun{} if you are</span></a>
<a class="sourceLine" id="cb20-9" data-line-number="9"><span class="st">concerned about time-out. I recall</span></a>
<a class="sourceLine" id="cb20-10" data-line-number="10"><span class="st">reading some best practice advice on CRAN'</span>s website at some point, but cannot find the reference</a>
<a class="sourceLine" id="cb20-11" data-line-number="11">anymore.</a>
<a class="sourceLine" id="cb20-12" data-line-number="12">The examples often show multiple ways to use the <span class="cf">function</span>, which is excellent. However,</a>
<a class="sourceLine" id="cb20-13" data-line-number="13">it might be a nice enhancement to add a little extra code to glimpse the data <span class="cf">for</span> the users to get</a>
<a class="sourceLine" id="cb20-14" data-line-number="14">a better feel <span class="cf">for</span> what they are getting out of the API call. This is especially helpful since</a>
<a class="sourceLine" id="cb20-15" data-line-number="15">the data that is returned can differ greatly depending on what args are passed.</a></code></pre></div>
<p><strong>Response:</strong> I’ve added glimpsing to the examples in different functions.</p>
<p>Vignettes</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">I like the <span class="cf">switch</span> to echo =<span class="st"> </span><span class="ot">TRUE</span> <span class="cf">for</span> vignette code chunks. This is the user<span class="st">'s opportunity</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="st">to see the code in action for the first time. Including the code used to generate the results can</span></a>
<a class="sourceLine" id="cb21-3" data-line-number="3"><span class="st">aid in understanding and readability.</span></a>
<a class="sourceLine" id="cb21-4" data-line-number="4"><span class="st">Vignettes are not currently built. This is not a big deal. However, it would</span></a>
<a class="sourceLine" id="cb21-5" data-line-number="5"><span class="st">be a convenience for those installing from GitHub or local repos. This is especially true since</span></a>
<a class="sourceLine" id="cb21-6" data-line-number="6"><span class="st">the API calls can cause vignettes to take a long time to build. (Currently I cannot build vignettes</span></a>
<a class="sourceLine" id="cb21-7" data-line-number="7"><span class="st">because I keep getting hung up).</span></a>
<a class="sourceLine" id="cb21-8" data-line-number="8"><span class="st">The addition of the theme and TOC is a nice touch.</span></a>
<a class="sourceLine" id="cb21-9" data-line-number="9"><span class="st">It looks like the vignette might still be a little incomplete. I see that the final paragraph of</span></a>
<a class="sourceLine" id="cb21-10" data-line-number="10"><span class="st">Querying data variables is not finished.</span></a>
<a class="sourceLine" id="cb21-11" data-line-number="11"><span class="st">It'</span>s unnecessary to hard<span class="op">-</span>code the results <span class="cf">in</span> code chunks. The results will be output when the vignette is knit.</a></code></pre></div>
<p><strong>Response:</strong> I’ve now pre-built the vignette.</p>
<p>Functionality</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="kw"><a href="reference/nomis_search.html">nomis_search</a></span>()</a>
<a class="sourceLine" id="cb22-2" data-line-number="2">    [suggestion] Currently, users can either search based on generic search terms or search <span class="cf">for</span> specific keywords.</a>
<a class="sourceLine" id="cb22-3" data-line-number="3">    Looking at the API docs, I think there is an opportunity to improve functionality by taking advantage</a>
<a class="sourceLine" id="cb22-4" data-line-number="4">    of some of the other search <span class="kw">categories</span> (e.g., name, description, content type, units). This would</a>
<a class="sourceLine" id="cb22-5" data-line-number="5">    be doubly useful since content type and units are not searched when performing a generic search.</a>
<a class="sourceLine" id="cb22-6" data-line-number="6">    </a>
<a class="sourceLine" id="cb22-7" data-line-number="7">    [suggestion] Rather than automatically inserting <span class="kw">wildcards</span> (<span class="op">*</span>), I would recommend informing the user of the wildcard</a>
<a class="sourceLine" id="cb22-8" data-line-number="8">    character so that they can have finer control over how wildcards are used <span class="cf">in</span> their search.</a>
<a class="sourceLine" id="cb22-9" data-line-number="9">    It would be nice to mention <span class="cf">in</span> the documentation that several terms can be searched at once using</a>
<a class="sourceLine" id="cb22-10" data-line-number="10">    a comma. Alternatively, the parameter could accept a character vector that could be</a>
<a class="sourceLine" id="cb22-11" data-line-number="11">    collapsed with commas.</a>
<a class="sourceLine" id="cb22-12" data-line-number="12">  </a>
<a class="sourceLine" id="cb22-13" data-line-number="13">    [suggestion] The <span class="cf">function</span> could potentially accept character vectors from each of the <span class="kw">categories</span> (as well as</a>
<a class="sourceLine" id="cb22-14" data-line-number="14">    a generic search term field) and then the appropriate search string could be created.</a>
<a class="sourceLine" id="cb22-15" data-line-number="15">    </a></code></pre></div>
<p><strong>Response:</strong> I have re-written nomis_search in keeping with your suggestions. It now accepts five parameters - name, description, keywords, content_type, units - and can search in any or all of them at the same time, with or without wildcards. I’ve also added a nomis_content_type() function to assist in looking up specific content types, which may be used with nomis_search().</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw">nomis_codes</span>()</a>
<a class="sourceLine" id="cb23-2" data-line-number="2">    Generally, it is helpful to mirror the language of the source material when possible.</a>
<a class="sourceLine" id="cb23-3" data-line-number="3">    The <span class="kw">nomis_codes</span>() <span class="cf">function</span> accepts a <span class="kw">dimension</span> (concept) and the <span class="cf">function</span> returns codes <span class="cf">for</span> that dimension.</a>
<a class="sourceLine" id="cb23-4" data-line-number="4">    Therefore, the argument code might be renamed to dimension or concept, since the</a>
<a class="sourceLine" id="cb23-5" data-line-number="5">    <span class="cf">function</span> searches <span class="cf">for</span> codes availalbe within a dimension.</a>
<a class="sourceLine" id="cb23-6" data-line-number="6">    Related to above, I think the <span class="op">@</span>title could be more descriptive.</a>
<a class="sourceLine" id="cb23-7" data-line-number="7">    </a>
<a class="sourceLine" id="cb23-8" data-line-number="8">    [suggestion] The query is currently built using a hierarchal structure. E.g., <span class="op">/</span>api<span class="op">/</span>v01<span class="op">/</span>dataset<span class="op">/</span><span class="er">&lt;</span>ID<span class="op">&gt;</span><span class="er">/&lt;</span>DIMENSION<span class="op">&gt;</span><span class="er">/&lt;</span>CODE<span class="op">&gt;</span><span class="er">/</span>def.sdmx.json. However,</a>
<a class="sourceLine" id="cb23-9" data-line-number="9">    I think there is an opportunity to make this query a little more flexible and extensible. Instead of enforcing the hierarchy,</a>
<a class="sourceLine" id="cb23-10" data-line-number="10">    the funciton could use the GET verb to provide a little more control over how the data is filtered. A user could</a>
<a class="sourceLine" id="cb23-11" data-line-number="11">    query on criteria from different dimensions than the one which they are interested <span class="cf">in</span> results from. For example,</a>
<a class="sourceLine" id="cb23-12" data-line-number="12">    even <span class="cf">if</span> the user is interested <span class="cf">in</span> the <span class="st">'item'</span> dimension, they may want to filter on <span class="st">'geography'</span> and <span class="st">'sex'</span>. Using GET would allow</a>
<a class="sourceLine" id="cb23-13" data-line-number="13">    <span class="cf">for</span> this. As an example<span class="op">:</span><span class="st"> </span><span class="er">/</span>api<span class="op">/</span>v01<span class="op">/</span>dataset<span class="op">/</span>NM_<span class="dv">1</span>_<span class="dv">1</span><span class="op">/</span>item.def.sdmx.json?geography=<span class="dv">2038432081</span><span class="op">&amp;</span>sex=<span class="fl">7.</span> This would also expose the user</a>
<a class="sourceLine" id="cb23-14" data-line-number="14">    to options <span class="cf">for</span> specifying times and dates, which cannot otherwise be done. I fully acknowledge that this might be over<span class="op">-</span>building,</a>
<a class="sourceLine" id="cb23-15" data-line-number="15">    since this <span class="cf">function</span> only provides a support role and will probably not be used that way.</a>
<a class="sourceLine" id="cb23-16" data-line-number="16">    This is a minor concern, but I feel it<span class="st">'s cleaner to specify value if a test function returns TRUE first when using ifelse().</span></a>
<a class="sourceLine" id="cb23-17" data-line-number="17"><span class="st">    The code ifelse(is.null(type), "", paste0("/", type)) reads cleaner than ifelse(is.null(type) == FALSE, paste0("/", type), "") IMO.</span></a>
<a class="sourceLine" id="cb23-18" data-line-number="18"><span class="st">nomis_data_info()</span></a>
<a class="sourceLine" id="cb23-19" data-line-number="19"><span class="st">    The documentation could be more explicit in telling the user that the data returned by this function is metadata.</span></a>
<a class="sourceLine" id="cb23-20" data-line-number="20"><span class="st">    </span></a></code></pre></div>
<p><strong>Response:</strong> I’ve updated the documentation to be more explicit about what the function actually does, and improved the code readability. I changed the <code>code</code> parameter to <code>concept</code>, as you suggested, to be more in keeping with the syntax used in the original API. I’ve also added a specific <code>search</code> parameter, and a generic <code>additional_queries</code> parameter, as used in <code><a href="reference/nomis_get_data.html">nomis_get_data()</a></code></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">    [suggestion] Relating to the comment above, it may be a little clearer to rename the <span class="cf">function</span> something to the effect of <span class="kw"><a href="reference/nomis_get_metadata.html">nomis_get_metadata</a></span>().</a>
<a class="sourceLine" id="cb24-2" data-line-number="2">    This naming scheme is more <span class="cf">in</span> line with the pattern set forth by nomis_get_data naming scheme.</a>
<a class="sourceLine" id="cb24-3" data-line-number="3"><span class="kw"><a href="reference/nomis_get_data.html">nomis_get_data</a></span>()</a></code></pre></div>
<p><strong>Response:</strong> I’ve renamed the nomis_codes() function to nomis_get_metadata(), which I agree is more descriptive of what the function actually does. I’ve also added the nomis_overview() function, which returns a more general overview of all available metadata, without the flexibility and specificity offered by nomis_get_metadata().</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">    I see that the API documentation states, <span class="st">"you have a 25000 cell limit on the number of data values downloaded in these formats."</span></a>
<a class="sourceLine" id="cb25-2" data-line-number="2">    It appears that the code currently breaks the fetch into multiple steps <span class="cf">if</span> the record count is greater than or equal to 25k records.</a>
<a class="sourceLine" id="cb25-3" data-line-number="3">    I am curious <span class="cf">if</span> this might be an oversight. It might be useful to test the edge case where the query returns more than 25k cells but</a>
<a class="sourceLine" id="cb25-4" data-line-number="4">    fewer than 25k records to see <span class="cf">if</span> everything still works.</a>
<a class="sourceLine" id="cb25-5" data-line-number="5">    </a></code></pre></div>
<p><strong>Response:</strong> The 25k limit refers to the number of observation values, the documentation is rather confusing on that point.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode R"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">    Including a select parameter may be a good enhancement <span class="cf">for</span> the future. Right now, that can be accomplished with</a>
<a class="sourceLine" id="cb26-2" data-line-number="2">    additional_queries but is probably important enough to be standalone. This would allow <span class="cf">for</span> additional documentation</a>
<a class="sourceLine" id="cb26-3" data-line-number="3">    and sugar to be added <span class="cf">for</span> it.</a>
<a class="sourceLine" id="cb26-4" data-line-number="4">    </a></code></pre></div>
<p><strong>Response:</strong> I’ve added a select parameter as an enhancement, as it is straightforward to do and reduces the amount of information that could possibly need to be included under additional_queries.</p>
<p>Conclusion</p>
<p>This is a great package that will be valuable to anyone interested in analysis of this data. Nice work!</p>
<p>I appreciate the opportunity to review this package and hope that my comments are constructive and useful. This package needs just a few tweaks (namely getting the examples up and running) and then I will gladly approve!</p>
</div>
</div>


  </div>

</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://evanodell.com'>Evan Odell</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

