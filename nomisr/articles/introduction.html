<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to nomisr • nomisr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/journal/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Google analytics --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-90706059-1', 'auto');
  ga('send', 'pageview');

</script>
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">nomisr</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="http://docs.evanodell.com">Docs Home</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="http://docs.evanodell.com">Documentation Home</a>
    </li>
    <li class="divider">
    <li>
      <a href="http://docs.evanodell.com/hansard">hansard</a>
    </li>
    <li>
      <a href="http://docs.evanodell.com/mnis">mnis</a>
    </li>
    <li>
      <a href="http://docs.evanodell.com/parlitools">parlitools</a>
    </li>
    <li>
      <a href="http://docs.evanodell.com/nomisr">nomisr</a>
    </li>
    <li>
      <a href="http://docs.evanodell.com/emisc">emisc</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/EvanOdell/nomisr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://evanodell.com">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Introduction to nomisr</h1>
                        <h4 class="author">Evan Odell</h4>
            
            <h4 class="date">2018-01-31</h4>
          </div>

    
    
<div class="contents">
<section id="introduction-to-nomis" class="level1"><h1>Introduction to Nomis</h1>
<p>Nomis provides free access to up-to-date official statistics from the Office for National Statistics (ONS).</p>
<p>There is a lot of data available through Nomis, and there are some limits to the amount of data that can be retrieved within a certain period of time, although those are not published. For more details, see the <a href="https://www.nomisweb.co.uk/api/v01/help">full API documentation</a> from Nomis.</p>
<p>Nomis data is based around administrative and statistical geographies, and a particular geography should be specified when downloading data.</p>
<section id="querying-data-availability" class="level2"><h2>Querying data availability</h2>
<p>Use the <code><a href="../reference/nomis_data_info.html">nomis_data_info()</a></code> function without any parameters to get a tibble with metadata for all available datasets:</p>
</section></section><section id="a-tibble-6-x-14" class="level1"><h1>A tibble: 6 x 14</h1>
<p>agencyid id uri version annotations.annotati… components.attribu… <chr><chr><chr><dbl><list><list><br>
1 NOMIS NM_1_1 Nm-1d1 1.00 &lt;data.frame [10 × 2]&gt; &lt;data.frame [7 × 4… 2 NOMIS NM_2_1 Nm-2d1 1.00 &lt;data.frame [6 × 2]&gt; &lt;data.frame [7 × 4… 3 NOMIS NM_4_1 Nm-4d1 1.00 &lt;data.frame [8 × 2]&gt; &lt;data.frame [7 × 4… 4 NOMIS NM_5_1 Nm-5d1 1.00 &lt;data.frame [5 × 2]&gt; &lt;data.frame [7 × 4… 5 NOMIS NM_6_1 Nm-6d1 1.00 &lt;data.frame [6 × 2]&gt; &lt;data.frame [7 × 4… 6 NOMIS NM_7_1 Nm-7d1 1.00 &lt;data.frame [6 × 2]&gt; &lt;data.frame [7 × 4… # … with 8 more variables: components.dimension <list>, # components.primarymeasure.conceptref <chr>, # components.timedimension.codelist <chr>, # components.timedimension.conceptref <chr>, description.value <chr>, # description.lang <chr>, name.value <chr>, name.lang <chr></chr></chr></chr></chr></chr></chr></chr></list></list></list></dbl></chr></chr></chr></p>
<p><code><a href="../reference/nomis_data_info.html">nomis_data_info()</a></code> can also be used to query metadata from a specific dataset, using its ID. The example below uses the “LC4408EW - Tenure by number of persons per bedroom in household by household type” dataset from the 2011 census, including the 3 nested data frames including metadata important to making specific queries.</p>
<p>Observations: 1 Variables: 12 $ agencyid <chr> “NOMIS” $ id <chr> “NM_893_1” $ uri <chr> “Nm-893d1” $ version <dbl> 1 $ annotations.annotation <list> [&lt;c(“Current (being acti… $ components.attribute <list> [&lt;c(”Mandatory“,”Condit… $ components.dimension <list> [&lt;c(“CL_893_1_GEOGRAPHY”… $ components.primarymeasure.conceptref <chr> “OBS_VALUE” $ components.timedimension.codelist <chr> “CL_893_1_TIME” $ components.timedimension.conceptref <chr> “TIME” $ name.value <chr> “LC4408EW - Tenure by num… $ name.lang <chr>”en" [[1]] annotationtext 1 Current (being actively updated) 2 Tenure,Persons per bedroom,Household type 3 Households 4 census_2011_lc 5 oa,ps 6 4.4b 7 All Households 8 c2011lc4408ew 9 2014-01-23 09:30:00 10 2014-01-23 09:30:00 11 This dataset provides 2011 Census estimates that classify households in England and Wales by tenure, by number of persons per bedroom in household and by household type. The estimates are as at census day, 27 March 2011. 12 Statistical Disclosure Control 13 In order to protect against disclosure of personal information from the 2011 Census, there has been swapping of records in the Census database between different geographic areas, and so some counts will be affected. In the main, the greatest effects will be at the lowest geographies, since the record swapping is targeted towards those households with unusual characteristics in small areas.details on the ONS Census disclosure control strategy may be found on the <a href="http://www.ons.gov.uk/ons/guide-method/census/2011/census-data/2011-census-prospectus/new-developments-for-2011-census-results/statistical-disclosure-control/index.html%5BStatistical" class="uri">http://www.ons.gov.uk/ons/guide-method/census/2011/census-data/2011-census-prospectus/new-developments-for-2011-census-results/statistical-disclosure-control/index.html[Statistical</a> Disclosure Control] page on the ONS web site. 14 2 annotationtitle 1 Status 2 Keywords 3 Units 4 contenttype/sources 5 contenttype/geoglevel 6 contenttype/censusrelease 7 SubDescription 8 Mnemonic 9 FirstReleased 10 LastUpdated 11 MetadataText0 12 MetadataTitle1 13 MetadataText1 14 MetadataCount</chr></chr></chr></chr></chr></list></list></list></dbl></chr></chr></chr></p>
<p>[[1]] assignmentstatus attachmentlevel codelist conceptref 1 Mandatory Observation CL_OBS_STATUS OBS_STATUS 2 Conditional Observation CL_OBS_CONF OBS_CONF 3 Conditional Observation CL_OBS_ROUND OBS_ROUND 4 Conditional Series CL_UNIT_MULT UNIT_MULTIPLIER 5 Mandatory Series CL_TIME_FORMAT TIME_FORMAT 6 Mandatory Series CL_UNIT UNIT 7 Mandatory Series <na> TITLE_COMPL</na></p>
<p>[[1]] codelist conceptref isfrequencydimension 1 CL_893_1_GEOGRAPHY GEOGRAPHY <na> 2 CL_893_1_C_TENHUK11 C_TENHUK11 <na> 3 CL_893_1_C_PPBROOMHEW11 C_PPBROOMHEW11 <na> 4 CL_893_1_C_AHTHUK11 C_AHTHUK11 <na> 5 CL_893_1_MEASURES MEASURES <na> 6 CL_893_1_FREQ FREQ true</na></na></na></na></na></p>
<p>When a tibble with metadata for all datasets or a specific dataset is returned, three of the columns: <code>annotations.annotation</code>, <code>components.attribute</code> and <code>components.dimension</code> are lists of nested data frames. <code>annotations.annotation</code> contains metadata on the dataset, including units and current status. <code>components.attribute</code> contains more detailed status metadata. <code>components.dimension</code> contains the grouping and summary variables available in the dataset, which vary between different datasets.</p>
<section id="downloading-data" class="level2"><h2>Downloading data</h2>
<p>Vast amounts of data are available through Nomis and so to avoid overwhelming the API, it is good practice to query what variables are available, using <code>nomis_codes</code>. This queries the different kinds of geography codes available through the API for the “LC4408EW - Tenure bynumber of persons per bedroom in household by household type” dataset.</p>
</section></section><section id="a-tibble-22-x-2" class="level1"><h1>A tibble: 22 x 2</h1>
<p>description value<br><chr><chr><br>
1 NHS area teams TYPE265 2 clinical commissioning groups TYPE266 3 built-up areas including subdivisions TYPE267 4 built-up areas TYPE269 5 national assembly for wales electoral regions 2010 TYPE273 6 postcode areas TYPE274 7 postcode districts TYPE275 8 postcode sectors TYPE276 9 national assembly for wales constituencies 2010 TYPE277 10 english parishes / welsh communities TYPE279 # … with 12 more rows</chr></chr></p>
<p>Using the information above, we can now query the latest data on bedroom occupancy per household type in different NHS clinical commissioning groups.</p>
<pre><code>#&gt; Retrieving additional pages 1 of 1</code></pre>
<p>Observations: 44,310 Variables: 40 $ DATE <int> 2011, 2011, 2011, 2011, 2011, 2011, 2… $ DATE_NAME <int> 2011, 2011, 2011, 2011, 2011, 2011, 2… $ DATE_CODE <int> 2011, 2011, 2011, 2011, 2011, 2011, 2… $ DATE_TYPE <chr> “date”, “date”, “date”, “date”, “date… $ DATE_TYPECODE <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0… $ DATE_SORTORDER <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0… $ GEOGRAPHY <int> 1115685029, 1115685029, 1115685029, 1… $ GEOGRAPHY_NAME <chr>”NHS South West Lincolnshire“,”NHS S… $ GEOGRAPHY_CODE <chr> “E38000165”, “E38000165”, “E38000165”… $ GEOGRAPHY_TYPE <chr> “clinical commissioning groups”, “cli… $ GEOGRAPHY_TYPECODE <int> 266, 266, 266, 266, 266, 266, 266, 26… $ GEOGRAPHY_SORTORDER <int> 119, 119, 119, 119, 119, 119, 119, 11… $ C_TENHUK11 <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0… $ C_TENHUK11_NAME <chr>”All categories: Tenure“,”All catego… $ C_TENHUK11_CODE <chr> “C_TENHUK11_Tmp4ZBJ0”, “C_TENHUK11_Tm… $ C_TENHUK11_TYPE <chr>”Tenure“,”Tenure“,”Tenure“,”Tenure… $ C_TENHUK11_TYPECODE <int> 1000000, 1000000, 1000000, 1000000, 1… $ C_TENHUK11_SORTORDER <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0… $ C_PPBROOMHEW11 <int> 1, 1, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3… $ C_PPBROOMHEW11_NAME <chr> “Up to 0.5 persons per bedroom”, “Up … $ C_PPBROOMHEW11_CODE <chr>”C_PPBROOMHEW11_1“,”C_PPBROOMHEW11_1… $ C_PPBROOMHEW11_TYPE <chr> “Persons per bedroom”, “Persons per b… $ C_PPBROOMHEW11_TYPECODE <int> 1000000, 1000000, 1000000, 1000000, 1… $ C_PPBROOMHEW11_SORTORDER <int> 1, 1, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3… $ C_AHTHUK11 <int> 4, 5, 0, 1, 2, 3, 4, 5, 0, 1, 2, 3, 4… $ C_AHTHUK11_NAME <chr>”Lone parent household“,”Multi-perso… $ C_AHTHUK11_CODE <chr> “C_AHTHUK11_Szp5wIsV”, “C_AHTHUK11_Sz… $ C_AHTHUK11_TYPE <chr>”Household Type“,”Household Type“,”… $ C_AHTHUK11_TYPECODE <int> 1000000, 1000000, 1000000, 1000000, 1… $ C_AHTHUK11_SORTORDER <int> 4, 5, 0, 1, 2, 3, 4, 5, 0, 1, 2, 3, 4… $ MEASURES <int> 20100, 20100, 20100, 20100, 20100, 20… $ MEASURES_NAME <chr> “Value”, “Value”, “Value”, “Value”, “… $ OBS_VALUE <int> 341, 94, 26706, 1768, 16814, 3588, 38… $ OBS_STATUS <chr>”A“,”A“,”A“,”A“,”A“,”A“,”A“,”A… $ OBS_STATUS_NAME <chr> “Normal Value”, “Normal Value”, “Norm… $ OBS_CONF <lgl> FALSE, FALSE, FALSE, FALSE, FALSE, FA… $ OBS_CONF_NAME <chr>”Free (free for publication)“,”Free … $ URN <chr> “Nm-893d1d32176e0d1115685029d0d1d4d20… $ RECORD_OFFSET <int> 25000, 25001, 25002, 25003, 25004, 25… $ RECORD_COUNT <int> 44310, 44310, 44310, 44310, 44310, 44…</int></int></chr></chr></lgl></chr></chr></int></chr></int></int></int></chr></chr></chr></int></int></int></chr></chr></chr></int></int></int></chr></chr></chr></int></int></int></chr></chr></chr></int></int></int></chr></int></int></int></p>
</section>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#introduction-to-nomis">Introduction to Nomis</a><ul class="nav nav-pills nav-stacked">
<li><a href="#querying-data-availability">Querying data availability</a></li>
      </ul>
</li>
      <li>
<a href="#a-tibble-6-x-14">A tibble: 6 x 14</a><ul class="nav nav-pills nav-stacked">
<li><a href="#downloading-data">Downloading data</a></li>
      </ul>
</li>
      <li><a href="#a-tibble-22-x-2">A tibble: 22 x 2</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://evanodell.com">Evan Odell</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
